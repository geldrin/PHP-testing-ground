<Root>
	
	<MediaCache>
		<WriterThreadPool>
			<PoolSize>8</PoolSize>
		</WriterThreadPool>
		<ReadAheadThreadPool>
			<PoolSize>4</PoolSize>
		</ReadAheadThreadPool>
		<!-- 1200M: heap size -->
		<MaxPendingWriteRequestSize>160M</MaxPendingWriteRequestSize>
		<MaxPendingReadAheadRequestSize>80M</MaxPendingReadAheadRequestSize>
		<!-- 4000M: heap size
		<MaxPendingWriteRequestSize>500M</MaxPendingWriteRequestSize>
		<MaxPendingReadAheadRequestSize>250M</MaxPendingReadAheadRequestSize>
		-->
		<!-- 8000M: heap size
		<MaxPendingWriteRequestSize>1000M</MaxPendingWriteRequestSize>
		<MaxPendingReadAheadRequestSize>500M</MaxPendingReadAheadRequestSize>
		-->
		<GCFrequency>10000</GCFrequency>
		<ContextMapperClass></ContextMapperClass>
		<Properties>
			<Property>
				<Name>addFileExtensionIfNeeded</Name>
				<Value>true</Value>
				<Type>Boolean</Type>
			</Property>
			<Property>
				<Name>urlEscapeStreamNameSpaces</Name>
				<Value>true</Value>
				<Type>Boolean</Type>
			</Property>
			<Property>
				<Name>urlEscapeStreamNameAll</Name>
				<Value>false</Value>
				<Type>Boolean</Type>
			</Property>
		</Properties>
	</MediaCache>
	
	<MediaCacheStores>
	
		<MediaCacheStore>
			<!-- variables: ${com.wowza.wms.context.ServerConfigHome} -->
			<Path>${com.wowza.wms.context.ServerConfigHome}/mediacache</Path>
			<MaxSize>30G</MaxSize>
			<Level1FolderCount>16</Level1FolderCount>
			<Level2FolderCount>16</Level2FolderCount>
			<FileCount>1000</FileCount>
			<!-- Mechanical Disk: assuming 25% of 65MBps sustained I/O rate = 16MBps -->
			<WriteRate>16M</WriteRate>
			<WriteRateMaxBucketSize>64M</WriteRateMaxBucketSize>
			<!-- SSD drive: assuming 25% of 150MBps sustained I/O rate = 38MBps
			<WriteRate>38M</WriteRate>
			<WriteRateMaxBucketSize>152M</WriteRateMaxBucketSize>
			-->
			<WriteRateFillFrequency>100</WriteRateFillFrequency>
			<Properties>
			</Properties>
		</MediaCacheStore>
	
	</MediaCacheStores>

	<MediaCacheSources>
	
		<!-- network attached storage, network file system... example -->
		<MediaCacheSource>
			<Name>Videosquare main</Name>
			<BasePath>/srv/vsq_storage/videosquare.eu/recordings/</BasePath>
			<Prefix></Prefix>
			<BaseClass>com.wowza.wms.plugin.mediacache.impl.MediaCacheItemFileImpl</BaseClass>
			<ReaderClass></ReaderClass>
			<DefaultBlockSize>256K</DefaultBlockSize>
			<MaxTimeToLive>1200000</MaxTimeToLive>
			<MinTimeToLive>600000</MinTimeToLive>
			<ReadAhead>true</ReadAhead>
			<ReadAheadThreshold>50</ReadAheadThreshold>
			<IsPassThru>false</IsPassThru>
			<Properties>
			</Properties>
		</MediaCacheSource>

	</MediaCacheSources>
</Root>
